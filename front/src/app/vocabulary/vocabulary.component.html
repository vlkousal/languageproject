<app-base></app-base>

<div class="spinner" [hidden]="!loading"></div>

<!--  PREVIEW -->
<div id="container" *ngIf="mode == 'none' && !loading">
	<div id="top-panel">
		<h2>{{ name }} {{ FLAGS[firstLanguage] }} {{ FLAGS[secondLanguage] }}</h2>
		<button class="settings-button" >
			<i class="fas fa-cog"></i>
		</button>
	</div>
  <p id="description">{{ description }}</p>
	<p>{{ contributor}}</p>
  <button (click)= "mode = 'one of three'">One Of Three</button>
  <button (click)="mode = 'write the answer'">Write The Answer</button>
  <button (click)="mode = 'flashcards'">Flashcards</button>
	<button (click)="mode = 'drawing'">Draw Characters</button>

	<div class="table-container">
		<table id="table">
			<tr>
				<th (click)="VocabUtils.sortByFirst(this.words)"> {{ this.firstLanguage }}</th>
				<th (click)="VocabUtils.sortByPhonetic(this.words)"> Phonetic</th>
				<th (click)="VocabUtils.sortByAnswer(this.words)"> {{ this.secondLanguage }}</th>
				<th (click)="VocabUtils.sortBySuccessRate(this.words)"> Correct rate</th>
			</tr>

			<tr *ngFor="let word of words">
				<td>{{ word.question }}</td>
				<td>{{ word.phonetic }}</td>
				<td>{{ word.correct }}</td>
				<td *ngIf="word.success_rate != -1">{{ word.success_rate }}%</td>
				<td *ngIf="word.success_rate == -1">-</td>
			</tr>
		</table>
	</div>

	<p>{{ firstLanguage }}</p>
	<select id="firstLanguageName" [formControl]="selectedFirstLanguageName" (change)="onFirstLanguageChange()">
		<option *ngFor="let language of languageNames">{{ language }}</option>
	</select>
	<button (click)="testFirstVoice()">Test</button>

	<p>{{ secondLanguage }}</p>
	<select id="secondLanguageName" [formControl]="selectedSecondLanguageName" (change)="onSecondLanguageChange()">
		<option *ngFor="let language of languageNames">{{ language }}</option>
	</select>
	<button (click)="testSecondVoice()">Test</button>
</div>

<app-oneofthree [words]=words (gameOver)="gameOver()" *ngIf="mode == 'one of three'"></app-oneofthree>
<app-writetheanswer [words]=words *ngIf="mode == 'write the answer'"></app-writetheanswer>
<app-flashcards [words]=words *ngIf="mode == 'flashcards'"></app-flashcards>


<!--
<div class="canvas-container" [hidden]="mode == 'drawing'">
	<canvas id="canvas" width="201" height="201"></canvas>

	<button (click)="resetCanvas()">Clear</button>
	<button (click)="checkDrawing()">Check</button>
</div>
-->

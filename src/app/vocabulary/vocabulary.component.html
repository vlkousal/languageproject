<app-base></app-base>

<head>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@500&display=swap" rel="stylesheet">
	<title>XD</title>
</head>

<!--  PREVIEW -->
<div id="preview" [hidden]="hidePreview" style="text-align: center;">
  <h2>{{ name }}</h2>
  <p>Contributor: {{ contributor}}</p>
	<p>{{ firstLanguage }}</p>
	<p>{{ secondLanguage }}</p>
  <p>{{ description }}</p>
  <button (click)="startOneOfThree()">One Of Three</button>
  <button (click)="startWriteTheAnswer()">Write The Answer</button>
  <button (click)="startFlashcards()">Flashcards</button>
	<button (click)="startDrawing()">Draw Characters</button>

	<div class="table-container">
		<table border="1" id="table">
			<tr>
				<th (click)="VocabUtils.sortByFirst(this.words)"> {{ this.firstLanguage }}</th>
				<th (click)="VocabUtils.sortByPhonetic(this.words)"> Phonetic</th>
				<th (click)="VocabUtils.sortByAnswer(this.words)"> {{ this.secondLanguage }}</th>
				<th (click)="VocabUtils.sortBySuccessRate(this.words)"> Correct rate</th>
			</tr>

			<tr *ngFor="let word of words">
				<td>{{ word.question }}</td>
				<td>{{ word.phonetic }}</td>
				<td>{{ word.correct }}</td>
				<td *ngIf="word.success_rate != -1">{{ word.success_rate }}%</td>
				<td *ngIf="word.success_rate == -1">-</td>
			</tr>
		</table>
	</div>

	<p>{{ firstLanguage }}</p>
	<select id="firstLanguageName" [formControl]="selectedFirstLanguageName" (change)="onFirstLanguageChange()">
		<option *ngFor="let language of languageNames">{{ language }}</option>
	</select>
	<button (click)="testFirstVoice()">Test</button>

	<p>{{ secondLanguage }}</p>
	<select id="secondLanguageName" [formControl]="selectedSecondLanguageName" (change)="onSecondLanguageChange()">
		<option *ngFor="let language of languageNames">{{ language }}</option>
	</select>
	<button (click)="testSecondVoice()">Test</button>
</div>


<div *ngIf="!hideChooseOfThree">
	<app-oneofthree [words]=words></app-oneofthree>
</div>



<!--  WRITE THE ANSWER -->
<div class="xd" [hidden]="hideWriteTheAnswer">
	<p>{{ index + 1 }}/{{ words.length }}     Score: {{ score }}</p>
	<p>Streak: {{ streak }}</p>
	<div title="Lives: {{ lives }}" class="hearts" *ngFor="let item of [].constructor(lives); let i = index">
		<img src="../../assets/srdce.png" alt="Lives">
	</div>
	<br><br>
	<strong style="font-size: 20px">{{ feedback }}</strong>
	<button (click)="SpeechUtils.speak(current.question)">Play</button>
	<div title="{{ current.phonetic}}"><p>{{ current.question }}</p></div>
	<input [formControl]="writtenAnswer" (keydown.enter)="checkWrittenAnswer()">
</div>


<!--  END SCREEN -->
<div class="end" [hidden]="hideEnd">
  <h1>Final score: {{ score }}</h1>
  <h3>{{correctAnswers}}/{{ words.length }} ({{ Math.floor(correctAnswers / (words.length / 100)) }}%)</h3>
  <button (click)="replay()">Restart</button>
  <button (click)="replayMistakes()">Replay mistakes</button>
  <div *ngFor="let word of wrong">
    <p><button (click)="SpeechUtils.speak(word.question)">{{ word.question }}</button> ({{ word.phonetic }}) - {{ word.correct }}</p>
  </div>
</div>

<div *ngIf="!hideFlashcards">
	<app-flashcards [words]=words></app-flashcards>
</div>


<div class="canvas-container" [hidden]="hideDrawing">
	<canvas id="canvas" width="201" height="201"></canvas>

	<button (click)="resetCanvas()">Clear</button>
	<button (click)="checkDrawing()">Check</button>
</div>



